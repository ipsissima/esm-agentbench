# Validation History

This directory contains the complete audit trail of all CI validation runs for the
ESM AgentBench spectral certificate system.

## Purpose

Every CI run generates timestamped validation reports that prove the spectral
certificate reliably distinguishes coherent reasoning from drift/hallucination.
This provides:

1. **Audit Trail**: Complete history of all validation runs
2. **Reproducibility**: Full metrics and configuration for each run
3. **Regression Detection**: Easy comparison of metrics across commits
4. **Compliance**: Proof of continuous validation for security/safety audits

## File Structure

```
validation_history/
├── README.md                           # This file
├── .gitkeep                            # Ensures directory is tracked
├── latest.json                         # Most recent validation report (JSON)
├── latest.md                           # Most recent validation report (Markdown)
├── {timestamp}_{commit}.json           # Timestamped reports (JSON)
└── {timestamp}_{commit}.md             # Timestamped reports (Markdown)
```

## Report Format

Each JSON report contains:

- **version**: Report schema version
- **timestamp**: ISO 8601 timestamp of the validation run
- **git_metadata**: Commit SHA, branch, author, message, date
- **ci_environment**: GitHub Actions run ID, workflow, actor, etc.
- **overall_verdict**: PASS/PARTIAL/FAIL with detailed checks
- **drift_validation**: Results from synthetic drift metric validation
- **real_trace_validation**: Results from real trace validation
- **demo_validation**: Results from demo SWE validation
- **calibration_data**: Current calibration thresholds

## Validation Criteria

The overall verdict is computed based on these criteria:

| Check | Threshold | Description |
|-------|-----------|-------------|
| Statistical Significance | p < 0.001 | T-test for gold vs drift distributions |
| AUC-ROC | > 0.8 | Discrimination ability of the classifier |
| Cohen's d | > 0.8 | Large effect size (practical significance) |

- **PASS**: All criteria met
- **PARTIAL**: Some criteria met
- **FAIL**: No criteria met

## Generating Reports

Reports are automatically generated by CI, but can also be run locally:

```bash
python tools/generate_validation_report.py
```

Options:
- `--no-update-benchmarks`: Skip updating BENCHMARKS.md
- `--output-dir PATH`: Write reports to a different directory

## CI Integration

Reports are generated and committed back to the repository on every push to main.
Pull request CI runs generate reports but do not commit them (available as artifacts).

See `.github/workflows/ci.yml` for the full workflow.
